![[Pasted image 20250916221334.png]]



| Step | Notes                                                                                                                                                                                                                                        |
| ---- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 1    | - RIP value = the start of main<br>- No instructions yet<br>- RSP's value is the return address of the piece of code that called main; this got placed onto the stack after it called main; we need the return address to get back to it<br> |

![[Pasted image 20250916221757.png]]

| Step | Notes                                                                                                                  |
| ---- | ---------------------------------------------------------------------------------------------------------------------- |
| 2    | - `sub` is executed; `rsp = rsp - 28`<br>- RSPs value goes down by hex 28 and can be seen to be different on the stack |

![[Pasted image 20250916222053.png]]

| Step | Notes                                                                                                                                                                                                                                                                                                                                                                     |
| ---- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 3    | - `call` is executed; calls the start of `func`<br>-  calling the new function will place a return address onto the stack<br>- **The return address will be the address of the function after the call or else it will make an infinite loop if it goes back to call after it's done**<br>- RSP also is decremented by 8 as the return address gets pushed onto the stack |
|      | - Call jumps to function<br>- ret  returns back to main, more specifically mov (140001019) and not call to avoid a loop                                                                                                                                                                                                                                                   |