
#### PE Primer

The OS loader reads the program (PE) from disk and loads it into memory as a process

![[Pasted image 20251024183826.png]]

To simplify it's format, the PE format (headers, fields, sections, directories, etc.) can be though of as a book.

A book contains a couple of things:
- "data" - the authors text/contents
- "metadata" - title, author, publisher, date, ToC, etc.

This can look somewhat like this:

| PE FILE            |
| ------------------ |
| Headers (metadata) |
| Sections (data)    |


![[Pasted image 20251024184651.png]]


---


| Section Header | Description                                                                                                                                            |
| -------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------ |
| .text          | executable code                                                                                                                                        |
| .rdata         | read only data                                                                                                                                         |
| .data          | module and global variables                                                                                                                            |
| .pdata         | information on exceptions                                                                                                                              |
| .rsrc          | contains "resources", i.e. pictures, icons, manifest files, version files etc.<br>**This can also contain other executable or dll's**                  |
| .reloc         | contains relocation information; this allows the Windows loader to safely load modules such as dll's or other excutables with randomised address space |

> `.text`, `.data`, `.rsrc` are the most important to understand for now


This can be dissected using PE Bear

![[Pasted image 20251025130600.png]]


PE metadata can also be seen using the  the Visual Studio Command Prompt and `dumpbin`

```powershell
dumpbin /headers C:\Windows\System32\calc.exe
```