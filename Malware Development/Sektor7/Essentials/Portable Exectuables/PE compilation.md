
#### Compiling via command line

exe
```powershell
cl.exe /nologo /Ox /MT /W0 /GS- /DNDEBUG /Tcimplant.cpp /link /OUT:implant.exe /SUBSYSTEM:CONSOLE /MACHINE:x64
```

dll
```powershell
cl.exe /D_USRDLL /D_WINDLL implantDLL.cpp /MT /link /DLL /OUT:implant.dll
```

#### Important MSVC Compiler [Options](https://learn.microsoft.com/en-us/cpp/build/reference/compiler-options-listed-alphabetically?view=msvc-170)

- `/nologo` - Suppresses display of the copyright banner when the compiler starts up.
- `/Ox` - Code optimization - a subset of `/O2` option (creates fast code) that doesn't include `/GF` (string pooling) or `/Gy` (function-level linking).
- `/MT` - Compiles to a multithreaded executable file, by using _LIBCMT.lib_ (statically linking C runtime library).
- `/W0` - Suppresses all warnings.
- `/GS-` - Disables buffer security.
- `/D<string>` - Defines a `<string>` constant (equivalent to `#define` directive at the beginning of a source code file). Helpful for enabling/disabling parts of the code during development and switching into a production phase.
- `/Tc` - Specifies a C source file. All code is treated as C code (instead of C++).
- `/link` - Passes the specified options to the [linker](https://learn.microsoft.com/en-us/cpp/build/reference/linker-options?view=msvc-170).
- `/OUT` - Specifies the output file name.
- `/SUBSYSTEM` - Tells the operating system how to run the `.exe` file, ex. `CONSOLE` (console app), `WINDOWS` (GUI app), etc.
- `/MACHINE` - Specifies the target platform, ex. `x86`, `x64`, `ARM`, etc.
- `/DLL` - Builds a DLL.

#### main() vs DllMain()

`main()`function is used for standalone executable programs and is the traditional entry point for C/C++ console applications. On the other hand, `DllMain()` is used for DLLs to handle initialization and cleanup tasks when they are loaded and unloaded in a process.

Here's an example of a simple `main()` function in C:

```c
#include <Windows.h>
#include <stdio.h>

int main() {
    printf("Hello, world!\n");
    return 0;
}
```

Here's an example of a `DllMain()` function in C:

```c
#include <Windows.h>

BOOL APIENTRY DllMain(HMODULE hModule, DWORD ul_reason_for_call, LPVOID lpReserved) {
    switch (ul_reason_for_call) {
        case DLL_PROCESS_ATTACH:
            // DLL is being loaded into the virtual address space of the current process.
            // Perform initialization tasks here.
            break;

        case DLL_PROCESS_DETACH:
            // DLL is being unloaded from the virtual address space of the current process.
            // Perform cleanup tasks here.
            break;

        case DLL_THREAD_ATTACH:
            // A new thread is being created in the current process.
            break;

        case DLL_THREAD_DETACH:
            // A thread is exiting gracefully in the current process.
            break;
    }
    return TRUE;
}
```


#### External Resources

[MSVC Compiler options listed alphabetically](https://learn.microsoft.com/en-us/cpp/build/reference/compiler-options-listed-alphabetically?view=msvc-170)
[Microsoft Linker options](https://learn.microsoft.com/en-us/cpp/build/reference/linker-options?view=msvc-170)